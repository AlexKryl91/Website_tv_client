@use '@styles/helpers/functions' as *;
@use '@styles/helpers/mixins' as *;
@use '@styles/helpers/media' as *;

$bar-h: rem(52);

.bar,
.bar-btn {
  display: flex;
  justify-content: flex-end;
  width: 100%;
  height: $bar-h;

  filter: drop-shadow(var(--sh-black-dark));
}

.bar {
  position: absolute;
  top: rem(-20);
  right: 0;
  z-index: 3;
}

.bar-btn {
  position: relative;
  margin-top: rem(-20);
}

.spacer {
  &::before {
    content: '';
    position: absolute;
    bottom: rem(20);
    left: 0;
    width: 100%;
    height: 0;
    background: var(--c-whitish);
    transition: height var(--transition-duration) ease-in;
    transform-origin: left bottom;
  }

  @media (any-hover: hover) {
    &:has(.button:hover) {
      &::before {
        height: rem(12);
      }
    }
  }

  &:has(.open) {
    &::before {
      content: none;
    }
  }
}

.button {
  height: 100%;
  padding-inline: rem(64);
  font-size: rem(20);
  color: var(--c-whitish);
  background: none;
  transition: var(--transition-duration);

  &::after {
    content: '';
    display: inline-block;
    width: rem(14);
    height: rem(8);
    margin: 0 0 rem(1) rem(8);
    @include bg-icon('/icons/chevron.svg');
  }
}

.open {
  &::after {
    transform: rotate(-180deg);
  }
}

@media screen and (max-width: rem($mobile-l)) {
  .button {
    padding-inline: rem(64) rem(20);
  }
}

@media screen and (max-width: rem(620)) {
  .button {
    padding-inline: rem(56) rem(20);
    font-size: rem(16);
    text-wrap: balance;
    text-align: left;
  }
}

// Stripes styles

$width-l: rem(82);
$width-m: rem(72);
$width-s: rem(62);
$width-xl: 60dvw;

$dx-l: calc($width-xl + $width-l);
$dx-m: calc($width-xl + $width-l + $width-m);
$dx-s: calc($width-xl + $width-l + $width-m + $width-s);

.stripe-xl {
  width: $width-xl;
  height: 100%;
  background: var(--c-blue-green-3);
  clip-path: polygon($bar-h 0, 100% 0, 100% 100%, 0 100%);
  transform: translate3d(100%, 0, 0);
}

$clip-blocks: polygon($bar-h 0, 100% 0, calc(100% - $bar-h) 100%, 0 100%);

.stripe-s,
.stripe-m,
.stripe-l {
  height: 100%;
  clip-path: $clip-blocks;
}

.stripe-l {
  width: $width-l;
  margin-right: rem(-36);
  background: var(--c-orange-dull);
  transform: translate3d($dx-l, 0, 0);
}

.stripe-m {
  width: $width-m;
  margin-right: rem(-32);
  background: var(--c-orange-persian);
  transform: translate3d($dx-l, 0, 0);
}

.stripe-s {
  width: $width-s;
  margin-right: rem(-28);
  background: var(--c-orange-bright);
  transform: translate3d($dx-s, 0, 0);
}

.active {
  $animation-duration: 0.5s;

  .stripe-xl {
    transform: translate3d(0, 0, 0);
    transition: transform $animation-duration ease-out;
  }

  .stripe-s,
  .stripe-m,
  .stripe-l {
    animation: slide $animation-duration ease-out forwards;
  }

  .stripe-l {
    animation-delay: 0.1s;
  }
  .stripe-m {
    animation-delay: 0.2s;
  }
  .stripe-s {
    animation-delay: 0.3s;
  }

  @keyframes slide {
    95% {
      scale: 0.6;
    }
    100% {
      transform: translate3d(0, 0, 0);
      scale: 1;
    }
  }
}
